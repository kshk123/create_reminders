<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Capture Dialog Tests</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #1f2937;
    }
    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .test-result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-family: monospace;
    }
    .test-pass {
      background: #d1fae5;
      border-left: 4px solid #10b981;
      color: #065f46;
    }
    .test-fail {
      background: #fee2e2;
      border-left: 4px solid #ef4444;
      color: #991b1b;
    }
    .summary {
      font-size: 18px;
      font-weight: 600;
      padding: 15px;
      margin: 20px 0;
      border-radius: 8px;
    }
    .summary.pass {
      background: #d1fae5;
      color: #065f46;
    }
    .summary.fail {
      background: #fee2e2;
      color: #991b1b;
    }
    button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      margin: 10px 0;
    }
    button:hover {
      background: #1d4ed8;
    }
    #output {
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>üìù Capture Dialog Test Suite</h1>
  
  <button onclick="runAllTests()">‚ñ∂Ô∏è Run All Tests</button>
  
  <div id="output"></div>
  
  <script src="capture-dialog.test.js"></script>
  
  <script>
    // Override console.log to display in the page
    const output = document.getElementById('output');
    const originalLog = console.log;
    const originalError = console.error;
    
    let testResults = [];
    
    console.log = function(...args) {
      const message = args.join(' ');
      originalLog.apply(console, args);
      
      const div = document.createElement('div');
      div.className = 'test-result';
      
      if (message.includes('‚úÖ')) {
        div.className += ' test-pass';
      } else if (message.includes('‚ùå')) {
        div.className += ' test-fail';
      }
      
      div.textContent = message;
      output.appendChild(div);
      
      // Track results
      if (message.includes('passed!')) {
        testResults.push({ name: message, passed: true });
      }
    };
    
    console.error = function(...args) {
      const message = args.join(' ');
      originalError.apply(console, args);
      
      const div = document.createElement('div');
      div.className = 'test-result test-fail';
      div.textContent = '‚ùå ERROR: ' + message;
      output.appendChild(div);
      
      testResults.push({ name: message, passed: false });
    };
    
    // Run tests function
    async function runAllTests() {
      output.innerHTML = '';
      testResults = [];
      
      const section = document.createElement('div');
      section.className = 'test-section';
      section.innerHTML = '<h2>Test Results</h2>';
      output.appendChild(section);
      
      try {
        // Check if the functions are loaded
        if (typeof window.testExtractDate === 'undefined') {
          console.error('Test functions not loaded! Make sure capture-dialog.test.js is loaded.');
          return;
        }
        
        // Run all test functions
        window.testExtractDate();
        window.testSetReminderBeforeEvent();
        window.testDSTBoundaries();
        window.testDayBoundaries();
        window.testEdgeCases();
        
        // Show summary
        setTimeout(() => {
          const allPassed = testResults.every(r => r.passed);
          const summary = document.createElement('div');
          summary.className = 'summary ' + (allPassed ? 'pass' : 'fail');
          summary.textContent = allPassed 
            ? `‚úÖ ALL ${testResults.length} TEST SUITES PASSED!`
            : `‚ùå SOME TESTS FAILED (${testResults.filter(r => !r.passed).length} failures)`;
          output.insertBefore(summary, output.firstChild);
        }, 100);
        
      } catch (error) {
        console.error(error.message);
        console.error(error.stack);
      }
    }
    
    // Note: The actual test functions are loaded from capture-dialog.test.js
    // This file just provides the UI wrapper
  </script>
</body>
</html>
